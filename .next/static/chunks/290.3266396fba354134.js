"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[290],{8290:(e,r,s)=>{s.r(r),s.d(r,{default:()=>y});var i,a=s(5155),l=s(3697),n=s(2440),t=s(532),o=s(7522),d=s(8955),c=s(1094);let u=null!==(i=globalThis.prismaGlobal)&&void 0!==i?i:new c.PrismaClient;var v=s(3550),w=s(3415);let m=w.z.object({email:w.z.string().email(),password:w.z.string().min(1)}),f=(0,v.y)(u),{auth:h,handlers:p,signIn:k,signOut:b}=(0,t.Ay)({adapter:f,providers:[d.A,(0,o.A)({credentials:{email:{},password:{}},authorize:async e=>{let r=m.parse(e),s=await u.user.findFirst({where:{email:r.email,password:r.password}});if(!s)throw Error("Invalid credentials.");return s}})],callbacks:{async jwt(e){let{token:r,account:s}=e;return(null==s?void 0:s.provider)==="credentials"&&(r.credentials=!0),r}},jwt:{encode:async function(e){var r,s;if(null===(r=e.token)||void 0===r?void 0:r.credentials){let r=(0,l.A)();if(!e.token.sub)throw Error("No user ID found in token");if(!await (null==f?void 0:null===(s=f.createSession)||void 0===s?void 0:s.call(f,{sessionToken:r,userId:e.token.sub,expires:new Date(Date.now()+2592e6)})))throw Error("Failed to create session");return r}return(0,n.lF)(e)}}});var g=s(3312),j=s(8042);let x=()=>{let e=async()=>{await (0,j.CI)()};return(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(g.$,{variant:"destructive",onClick:e,children:"Sign Out"})})};async function y(){var e;let r=await h();return(0,a.jsx)(a.Fragment,{children:r&&(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-4",children:[(null===(e=r.user)||void 0===e?void 0:e.image)&&(0,a.jsx)("img",{src:r.user.image,alt:"User profile",className:"w-10 h-10 rounded-full border border-gray-300"}),(0,a.jsx)(x,{})]})})}}}]);